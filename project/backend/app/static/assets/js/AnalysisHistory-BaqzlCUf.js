import{_ as c,c as a,o as i,a as e,t as d,n as m,i as p,w as y,v as f,b as v,y as x,F as D,r as I,p as g}from"./index-Rrdt5B4n.js";const H={props:{item:{type:Object,required:!0}},computed:{formattedTime(){return new Date(this.item.time).toLocaleString()},statusText(){return{processing:"分析中",completed:"已完成",expired:"已过期"}[this.item.status]},statusClass(){return`status-${this.item.status}`},isExpiringSoon(){const s=new Date(this.item.expiry);return Math.ceil((s-Date.now())/(1e3*3600*24))<=3}},methods:{handleDelete(){confirm("确定要永久删除此报告？")&&this.$emit("delete",this.item.id)}},emits:["download","delete"]},b={class:"history-item"},w={class:"time-col"},k={class:"analysis-time"},C={class:"status-col"},$={class:"expiry-col"};function Q(s,t,u,_,o,r){return i(),a("div",b,[e("div",w,[e("span",k,d(r.formattedTime),1)]),e("div",C,[e("span",{class:m(["status-badge",r.statusClass])},d(r.statusText),3)]),e("div",$,[e("span",{class:m(["expiry-indicator",{"expiring-soon":r.isExpiringSoon}])},d(u.item.expiry),3)]),e("div",null,[e("button",{class:"download-btn",onClick:t[0]||(t[0]=()=>{})}," 查看 "),e("button",{class:"delete-btn",onClick:t[1]||(t[1]=(...l)=>r.handleDelete&&r.handleDelete(...l))}," 删除 ")])])}const T=c(H,[["render",Q],["__scopeId","data-v-939e59ac"]]),B={},M={class:"virtual-header"};function S(s,t){return i(),a("div",M,t[0]||(t[0]=[e("div",{class:"header-cell"},"分析时间",-1),e("div",{class:"header-cell"},"状态",-1),e("div",{class:"header-cell"},"有效期",-1),e("div",{class:"header-cell"},"操作",-1)]))}const U=c(B,[["render",S],["__scopeId","data-v-546e3318"]]),V={components:{HistoryItem:T,HistoryHeader:U},data(){return{searchQuery:"",historyItems:[{id:1,time:"2024-02-20 10:12",status:"expired",expiry:"2024-03-20",reportUrl:"@/assets/pdf"},{id:2,time:"2024-07-20 12:42",status:"completed",expiry:"2024-03-20",reportUrl:"@/assets/pdf"},{id:3,time:"2024-09-12 14:34",status:"processing",expiry:"2024-03-20",reportUrl:"@/assets/pdf"}]}},computed:{filteredItems(){return this.historyItems.filter(s=>s.time.includes(this.searchQuery)||s.status.includes(this.searchQuery))}},methods:{handleDownload(s){},handleDelete(s){}}},E={class:"analysis-history"},N={class:"search-filter"},F={class:"table-body"},L={key:0,class:"empty-row"};function j(s,t,u,_,o,r){const l=p("HistoryHeader"),h=p("HistoryItem");return i(),a("section",E,[t[1]||(t[1]=e("h2",{class:"section-title"},"分析历史记录",-1)),e("div",N,[y(e("input",{"onUpdate:modelValue":t[0]||(t[0]=n=>o.searchQuery=n),type:"text",placeholder:"搜索历史记录"},null,512),[[f,o.searchQuery]])]),e("div",null,[v(l),e("div",F,[(i(!0),a(D,null,I(r.filteredItems,n=>(i(),g(h,{key:n.id,item:n},null,8,["item"]))),128)),r.filteredItems.length?x("",!0):(i(),a("div",L,d(o.searchQuery?"无搜索结果":"暂无数据"),1))])])])}const z=c(V,[["render",j],["__scopeId","data-v-9a6dfd27"]]);export{z as default};
